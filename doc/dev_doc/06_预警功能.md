#!markdown

## 预警信息发送
有时候会需要预警报表，意思就是这个报表的数据并不是供用户查看的，或者说不仅仅是供用户查看的，而是作为后台定时脚本独立运行，并且将运行结果发送给相应负责人的。
如果是这样的脚本，我们需要配置“Crontab时间配置”和“配置”,来发送报警数据，目前平台支持两种发送：邮件和微信。
这里给出完整的配置示例：

### 邮件发送
Crontab时间配置: */30 * * * * mail
每隔30分钟运行脚本，并且将运行输出结果邮件发送给配置人员。
邮件配置


```
{
	"mail" : {
		"receiver" : "zhangsan@mail.com,lisi@mail.com",
		"subject" : "这是一个xxx的预警"
	}
}
```


### 报警消息发送
Crontab时间配置: */30 * * * * alarm
每隔30分钟运行脚本，并且将运行输出结果邮件发送给配置人员。
微信配置


```
{
	"alarm" : {
		"type" : "dd",  //发送报警消息的渠道，多个用逗号分隔，目前萌推支持钉钉。 "dd" 或 "dd.tech":技术大群 , "dd.tech.go":go组, "dd.tech.php":php组, "dd.ae":运营组
		"receiver" : {
			"dd" : "zhangsan,lisi" //渠道的收件人列表，钉钉的收件人支持钉钉手机号，中文姓名，姓名拼单
		}
	}
}
```

系统判定一个报表是否包含报警消息，是通过检测SQL执行的结果行中，是否包含了列名为"message"且不为空。


不管是邮件发送还是微信发送都需要有环境的支持，比如邮件发送需要配置自己的或者第三方的邮件配置，如果是微信发送则需要有相应的微信发送接口
